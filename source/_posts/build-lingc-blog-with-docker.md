---
title: 借助docker搭建个人hexo博客
date: 2019-12-13 22:40:38
tags:
---

> 感谢开源社区！我又爱上了写博客。

> 本文介绍借助docker搭建一个hexo博客，支持git hook在文章更新时自动触发博客系统重新部署，整站支持https，支持CDN分发静态资源，支持 www 形式的url 301 到non-www形式以避免seo权重分散；

<!--more-->

docker真的太棒了，身边前端朋友都在学docker。 我也想学，除了工作上将自己负责的编辑器全部容器化后，觉得博客系统也适合用docker，来来回回研究了几天，实现的功能不多，但是坑却不少。好久不写文章，文笔不好，就直接开始吧。

### 购买个人服务器
从学生时代做外包就有自己的服务器，随着工作室倒闭了，服务器也吃灰了。双十一其他的都没买，就花了702元续费了4年我的祖传屌丝配置服务器（1核1G内存按流量计费的带宽），花了300霸占了我的专有域名9年。觉得是这几年最值的一次双十一剁手。
想想家里的电脑都是8核16G内存起步了。。
阿里云、腾讯云我都买过，比较下来腾讯云比较便宜，套路也比较少；传说阿里云技术比较强悍，但是对我一个只用来存静态博客系统，跑脚本的人来说，只需要服务器不宕机，就足够了。

### 搭建hexo博客
hexo是很热门的开源博客系统，实现将markdown渲染成静态资源包，我们只需要将静态资源包放到服务器上，配置个nginx路径就可以访问。
markdown文档又可以直接托管在git服务上，也就是只要git服务不倒闭，就算服务器炸了，我们的博客都不会丢。

### 自动更新hexo博客
最开始玩hexo是每写一篇文章，就生成一次静态资源包，然后手工搬运到服务器上，效率很低；
后来，出现了hexo部署到gitpage的插件，通过一条deploy命令就可以将构建好的静态资源包托管在gitpage上，然后指定 ***.github.io的域名去访问博客。
这个方式有一些好处：github是免费的，gitpage也是免费的，一切都是免费的。
当然也有一些不能忍受的：github在国内功夫网下，速度不理想。
受CI(持续集成)启发，可以实现写文章->push到git->触发webhook自动构建静态资源，自动部署；

### 将博客放在个人服务器上
没有什么比独占一个东西并且拥有绝对使用权更舒服的事情了。暂且就当sftp传个博客zip包到服务器上后解压吧。
由于是国内服务器，要访问到web服务，域名需要备案。从申请备案到通过，腾讯云+通信管理局一共花了7天。速度算快的了。

### 采用https方式访问
单纯喜欢浏览器地址栏对https前面显示的那把锁。但其实搜索引擎对https站点加权比http多。

### CDN部署
并不是我的博客有多少访问量，只是因为穷。按流量收费的服务器，1GB是8毛钱。但是如果把它步在CDN上，1GB是2毛钱，每个月前10GB还免费；而且CDN还能智能匹配访客最适合的接入节点，大大提高站点打开速度，简直不能太香。

### 对象存储
![测试](https://cos.linguochi.com/2019/12/16/re.png)

### 301跳转

### docker化


